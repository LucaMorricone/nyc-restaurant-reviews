"use strict";!function(n,c,e){if(n.fetch){var t,o=void 0;n.initMap=function(){e.onLine&&r().then(function(e){if(e){var i;o=new google.maps.Map(c.getElementById("map"),{center:e.latlng,zoom:16,scrollwheel:!1,keyboardShortcuts:!1}),DBHelper.mapMarkerForRestaurant(e,o),i=o.addListener("tilesloaded",function(){var e=c.getElementById("map-container"),t=c.createElement("a");t.className="skip-link button",t.href="#restaurant-container",t.innerHTML="Skip the map",e.insertAdjacentElement("afterbegin",t);var n=c.createElement("h2");n.id="map-label",n.className="sr-only",n.innerHTML="Google Maps Widget: shows the restaurant location",e.insertAdjacentElement("afterbegin",n);var a=c.querySelector('#map div[tabindex="0"]');a.setAttribute("aria-labelledby","map-label");var r=c.getElementById("map");a.addEventListener("focus",function(){r.classList.add("focused")}),a.addEventListener("blur",function(){r.classList.remove("focused")}),r.addEventListener("focus",function(){o.setOptions({keyboardShortcuts:!0})},!0),r.addEventListener("blur",function(){o.setOptions({keyboardShortcuts:!1})},!0),google.maps.event.removeListener(i)});var t=o.addListener("tilesloaded",function(){setTimeout(function(){c.querySelector("#map iframe").title="Map shows "+e.name+" location"},150),google.maps.event.removeListener(t)});l(e)}else a()}).catch(function(e){console.log(e)})},e.onLine||(t=function(){r().then(function(e){var t,n;e?(l(e),t=c.getElementById("map"),(n=c.createElement("p")).innerHTML="âš  You are offline, map is not available.",t.classList.add("offline"),t.setAttribute("role","alert"),t.append(n)):a()}).catch(function(e){console.log(e)})},"loading"!==c.readyState?t():c.addEventListener("DOMContentLoaded",function e(){t(),c.removeEventListener("DOMContentLoaded",e)}))}else console.log("Fetch API not supported");function a(){c.querySelector("title").innerHTML="Page Not Found - Restaurant Reviews",c.body.removeChild(c.querySelector("a.skip-link")),c.body.removeChild(c.querySelector('nav[aria-label="Breadcrumb"]'));var e=c.querySelector("main");e.innerHTML="",c.body.className="error-page",e.removeAttribute("class");var t=c.createElement("div");t.setAttribute("role","alert");var n=c.createElement("header"),a=c.createElement("h1");a.innerHTML="Error 404";var r=c.createElement("p");r.innerHTML="Sorry, but the page you were trying to view does not exist.",n.append(a),n.append(r);var i=c.createElement("p"),o=c.createElement("a");o.href="/",o.className="button",o.innerHTML="Go to our home page",i.append(o),t.append(n),t.append(i),e.append(t)}function r(){var e,t=(e="id",new URL(n.location.href).searchParams.get(e));if(t)return DBHelper.fetchRestaurantById(t).then(function(e){if(e)return function(e){c.querySelector("title").innerHTML=e.name+" - Restaurant Info and Reviews",c.getElementById("restaurant-name").innerHTML=e.name,c.getElementById("restaurant-address").innerHTML=e.address;var t=c.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e,800),t.sizes="(min-width: 1366px) calc((1366px - 4rem) / 3), (min-width: 1080px) calc((100vw - 4rem) / 3), (min-width: 700px) calc((100vw - 3rem) / 2), calc(100vw - 2rem)",t.srcset=DBHelper.formatSrcset(e),t.alt=e.photoDescription||"The Restaurant "+e.name+" in "+e.neighborhood;var n=c.getElementById("restaurant-cuisine"),a=c.createElement("strong");a.innerHTML="Type of Cuisine: "+e.cuisine_type,n.appendChild(a),e.operating_hours&&function(e){var t=c.getElementById("restaurant-hours");for(var n in e){var a=c.createElement("tr"),r=c.createElement("th");r.innerHTML=n,r.scope="row",a.appendChild(r);var i=c.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}}(e.operating_hours);!function(e){var t=c.getElementById("reviews-container"),n=c.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var a=c.createElement("p");return a.innerHTML="No reviews yet!",t.appendChild(a)}var r=c.getElementById("reviews-list");e.forEach(function(e){r.appendChild(function(e){var t=c.createElement("li"),n=c.createElement("article"),a=c.createElement("header"),r=c.createElement("h3"),i=c.createElement("span");i.innerHTML=e.name,r.appendChild(i);var o=c.createElement("time");o.dateTime=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1+"",r=t.getDate()+"";a.length<2&&(a="0"+a);r.length<2&&(r="0"+r);return[n,a,r].join("-")}(e.date),o.innerHTML=e.date,r.appendChild(o),a.appendChild(r),n.appendChild(a);var l=c.createElement("p"),d=c.createElement("abbr");d.title="Rating: "+e.rating+" of 5",d.className="stars-"+e.rating,l.appendChild(d),n.appendChild(l);var s=c.createElement("p");return s.innerHTML=e.comments,n.appendChild(s),t.appendChild(n),t}(e))}),t.appendChild(r)}(e.reviews)}(e),e}).catch(function(e){console.log(e)})}function l(e){var t=c.getElementById("breadcrumb"),n=c.createElement("li"),a=c.createElement("a"),r=DBHelper.urlForRestaurant(e);a.href=r,a.setAttribute("aria-current","page"),a.innerHTML=e.name,n.appendChild(a),t.appendChild(n)}}(window,document,navigator);
//# sourceMappingURL=restaurant_info.js.map
