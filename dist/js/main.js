"use strict";!function(d,c){var t;t=function(){var t;t=function(){var e=d.getElementById("loading-layer");e&&(e.classList.add("loaded"),setTimeout(function(){d.body.removeChild(e)},400))},"complete"===d.readyState?t():d.addEventListener("readystatechange",function e(){"complete"===d.readyState&&t(),d.removeEventListener("readystatechange",e)}),function(){function t(e){var t;t=void 0,c.serviceWorker.addEventListener("controllerchange",function(){t||(location.reload(!0),t=!0)});var n=d.createElement("div");n.id="update-alert",n.setAttribute("role","alert");var i=d.createElement("p");i.innerHTML="New version available.";var o=d.createElement("p");o.className="no-wrap";var s=d.createElement("button");s.type="button",s.innerHTML="REFRESH";var a=d.createElement("button");a.type="button",a.innerHTML="DISMISS",o.append(s),o.append(a),n.append(i),n.append(o),d.body.append(n),setTimeout(function(){n.className="open",setTimeout(function(){s.focus(),setTimeout(function(){sessionStorage.dismissed||r(n)},5e3)},300)},1e3),s.addEventListener("click",function(){e.postMessage({action:"refresh"})}),a.addEventListener("click",function(){c.serviceWorker.controller.postMessage({action:"dismiss"}),r(n)})}function n(e){e.addEventListener("statechange",function(){"installed"==this.state&&t(this)})}function r(e){e.classList.remove("open"),d.body.focus(),setTimeout(function(){e.parentNode.removeChild(e)},300)}c.serviceWorker?c.serviceWorker.register("/sw.js").then(function(e){c.serviceWorker.controller&&(c.serviceWorker.addEventListener("message",function(e){"refreshed"===e.data.action&&sessionStorage.removeItem("dismissed"),"dismissed"===e.data.action&&sessionStorage.setItem("dismissed",!0)}),sessionStorage.dismissed||(e.waiting?t(e.waiting):e.installing?n(e.installing):e.addEventListener("updatefound",function(){n(e.installing)})))}).catch(function(e){console.log("[SW] Registration failed, error:",e)}):console.log("Service Worker not supported")}()},"loading"!==d.readyState?t():d.addEventListener("DOMContentLoaded",function e(){t(),d.removeEventListener("DOMContentLoaded",e)})}(document,navigator);
//# sourceMappingURL=main.js.map
