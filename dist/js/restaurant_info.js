"use strict";!function(a,s,e){if(a.fetch){var t,o=void 0;a.initMap=function(){e.onLine&&n().then(function(e){if(e){var t,i;d(e),t=e.latlng,function(){var e=s.getElementById("static-map");function t(){s.getElementById("map").style.display="block",e.removeAttribute("tabindex"),e.removeAttribute("role"),e.removeAttribute("aria-label"),setTimeout(function(){s.querySelector('#map div[tabindex="0"]').focus()},1e3)}e.addEventListener("click",function(){t()}),e.addEventListener("keydown",function(e){13===e.keyCode&&t()})}(),l(t),a.addEventListener("resize",function(){requestAnimationFrame(function(){l(t)})}),o=new google.maps.Map(s.getElementById("map"),{center:e.latlng,zoom:17,scrollwheel:!1,keyboardShortcuts:!1}),DBHelper.mapMarkerForRestaurant(e,o),i=o.addListener("tilesloaded",function(){var e=s.getElementById("map-container"),t=s.createElement("a");t.className="skip-link button",t.href="#restaurant-container",t.innerHTML="Skip the map",e.insertAdjacentElement("afterbegin",t);var n=s.createElement("h2");n.id="map-label",n.className="sr-only",n.innerHTML="Google Maps Widget: shows the restaurant location",e.insertAdjacentElement("afterbegin",n);var a=s.querySelector('#map div[tabindex="0"]');a.setAttribute("aria-labelledby","map-label");var r=s.getElementById("map");a.addEventListener("focus",function(){r.classList.add("focused")}),a.addEventListener("blur",function(){r.classList.remove("focused")}),r.addEventListener("focus",function(){o.setOptions({keyboardShortcuts:!0})},!0),r.addEventListener("blur",function(){o.setOptions({keyboardShortcuts:!1})},!0),google.maps.event.removeListener(i)});var n=o.addListener("tilesloaded",function(){setTimeout(function(){s.querySelector("#map iframe").title="Map shows "+e.name+" location"},150),google.maps.event.removeListener(n)})}else r()}).catch(function(e){console.log(e)})},e.onLine||(t=function(){n().then(function(e){var t,n;e?(d(e),t=s.getElementById("map"),(n=s.createElement("p")).innerHTML="âš  You are offline, map is not available.",t.classList.add("offline"),t.setAttribute("role","alert"),t.append(n)):r()}).catch(function(e){console.log(e)})},"loading"!==s.readyState?t():s.addEventListener("DOMContentLoaded",function e(){t(),s.removeEventListener("DOMContentLoaded",e)}))}else console.log("Fetch API not supported");function r(){s.querySelector("title").innerHTML="Page Not Found - Restaurant Reviews",s.body.removeChild(s.querySelector("a.skip-link")),s.body.removeChild(s.querySelector('nav[aria-label="Breadcrumb"]'));var e=s.querySelector("main");e.innerHTML="",s.body.className="error-page",e.removeAttribute("class");var t=s.createElement("div");t.setAttribute("role","alert");var n=s.createElement("header"),a=s.createElement("h1");a.innerHTML="Error 404";var r=s.createElement("p");r.innerHTML="Sorry, but the page you were trying to view does not exist.",n.append(a),n.append(r);var i=s.createElement("p"),o=s.createElement("a");o.href="/",o.className="button",o.innerHTML="Go to our home page",i.append(o),t.append(n),t.append(i),e.append(t)}function l(e){var t=s.getElementById("static-map"),n=t.clientWidth,a=t.clientHeight,r=640<n||640<a?2:1,i=a<n?+(n/a).toFixed(6):+(a/n).toFixed(6);a<n?(n=640<n?640:n,a=Math.round(n/i)):(a=640<a?640:a,n=Math.round(a/i)),t.style.backgroundImage="url(https://maps.googleapis.com/maps/api/staticmap?size="+n+"x"+a+"&scale="+r+"&markers=color:red%7C"+e.lat+","+e.lng+"&key=AIzaSyAxfOOcB40yMKfupF4qyfa4hwvhTclZboA)"}function n(){var e,t=(e="id",new URL(a.location.href).searchParams.get(e));if(t)return DBHelper.fetchRestaurantById(t).then(function(e){if(e)return function(e){s.querySelector("title").innerHTML=e.name+" - Restaurant Info and Reviews",s.getElementById("restaurant-name").innerHTML=e.name,s.getElementById("restaurant-address").innerHTML=e.address;var t=s.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e,800),t.sizes="(min-width: 1366px) calc((1366px - 4rem) / 3), (min-width: 1080px) calc((100vw - 4rem) / 3), (min-width: 700px) calc((100vw - 3rem) / 2), calc(100vw - 2rem)",t.srcset=DBHelper.formatSrcset(e),t.alt=e.photoDescription||"The Restaurant "+e.name+" in "+e.neighborhood;var n=s.getElementById("restaurant-cuisine"),a=s.createElement("strong");a.innerHTML="Type of Cuisine: "+e.cuisine_type,n.appendChild(a),e.operating_hours&&function(e){var t=s.getElementById("restaurant-hours");for(var n in e){var a=s.createElement("tr"),r=s.createElement("th");r.innerHTML=n,r.scope="row",a.appendChild(r);var i=s.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}}(e.operating_hours);!function(e){var t=s.getElementById("reviews-container"),n=s.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var a=s.createElement("p");return a.innerHTML="No reviews yet!",t.appendChild(a)}var r=s.getElementById("reviews-list");e.forEach(function(e){r.appendChild(function(e){var t=s.createElement("li"),n=s.createElement("article"),a=s.createElement("header"),r=s.createElement("h3"),i=s.createElement("span");i.innerHTML=e.name,r.appendChild(i);var o=s.createElement("time");o.dateTime=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1+"",r=t.getDate()+"";a.length<2&&(a="0"+a);r.length<2&&(r="0"+r);return[n,a,r].join("-")}(e.date),o.innerHTML=e.date,r.appendChild(o),a.appendChild(r),n.appendChild(a);var l=s.createElement("p"),d=s.createElement("abbr");d.title="Rating: "+e.rating+" of 5",d.className="stars-"+e.rating,l.appendChild(d),n.appendChild(l);var c=s.createElement("p");return c.innerHTML=e.comments,n.appendChild(c),t.appendChild(n),t}(e))}),t.appendChild(r)}(e.reviews)}(e),e}).catch(function(e){console.log(e)})}function d(e){var t=s.getElementById("breadcrumb"),n=s.createElement("li"),a=s.createElement("a"),r=DBHelper.urlForRestaurant(e);a.href=r,a.setAttribute("aria-current","page"),a.innerHTML=e.name,n.appendChild(a),t.appendChild(n)}}(window,document,navigator);
//# sourceMappingURL=restaurant_info.js.map
