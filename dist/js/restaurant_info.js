"use strict";!function(s,d,e){if(s.fetch){var t,o=void 0;s.initMap=function(){e.onLine&&n().then(function(e){if(e){var t,i;l(e),t=e.latlng,function(){var e=d.getElementById("static-map");function t(){d.getElementById("map").style.display="block",e.removeAttribute("tabindex"),e.removeAttribute("role"),e.removeAttribute("aria-label"),setTimeout(function(){d.querySelector('#map div[tabindex="0"]').focus()},1e3)}e.addEventListener("click",function(){t()}),e.addEventListener("keydown",function(e){13===e.keyCode&&t()})}(),r(t),s.addEventListener("resize",function(){requestAnimationFrame(function(){r(t)})}),o=new google.maps.Map(d.getElementById("map"),{center:e.latlng,zoom:17,scrollwheel:!1,keyboardShortcuts:!1}),DBHelper.mapMarkerForRestaurant(e,o),i=o.addListener("tilesloaded",function(){var e=d.getElementById("map-container"),t=d.createElement("a");t.className="skip-link button",t.href="#restaurant-container",t.innerHTML="Skip the map",e.insertAdjacentElement("afterbegin",t);var n=d.createElement("h2");n.id="map-label",n.className="sr-only",n.innerHTML="Google Maps Widget: shows the restaurant location",e.insertAdjacentElement("afterbegin",n);var a=d.querySelector('#map div[tabindex="0"]');a.setAttribute("aria-labelledby","map-label");var r=d.getElementById("map");a.addEventListener("focus",function(){r.classList.add("focused")}),a.addEventListener("blur",function(){r.classList.remove("focused")}),r.addEventListener("focus",function(){o.setOptions({keyboardShortcuts:!0})},!0),r.addEventListener("blur",function(){o.setOptions({keyboardShortcuts:!1})},!0),google.maps.event.removeListener(i)});var n=o.addListener("tilesloaded",function(){setTimeout(function(){d.querySelector("#map iframe").title="Map shows "+e.name+" location"},150),google.maps.event.removeListener(n)})}else a()}).catch(function(e){console.log(e)})},e.onLine||(t=function(){n().then(function(e){var t,n;e?(l(e),t=d.getElementById("static-map"),(n=d.createElement("p")).setAttribute("role","alert"),n.innerHTML="âš  You are offline, map is not available.",t.classList.add("offline"),t.append(n)):a()}).catch(function(e){console.log(e)})},"loading"!==d.readyState?t():d.addEventListener("DOMContentLoaded",function e(){t(),d.removeEventListener("DOMContentLoaded",e)}))}else console.log("Fetch API not supported");function a(){d.querySelector("title").innerHTML="Page Not Found - Restaurant Reviews",d.body.removeChild(d.querySelector("a.skip-link")),d.body.removeChild(d.querySelector('nav[aria-label="Breadcrumb"]'));var e=d.querySelector("main");e.innerHTML="",d.body.className="error-page",e.removeAttribute("class");var t=d.createElement("div");t.setAttribute("role","alert");var n=d.createElement("header"),a=d.createElement("h1");a.innerHTML="Error 404";var r=d.createElement("p");r.innerHTML="Sorry, but the page you were trying to view does not exist.",n.append(a),n.append(r);var i=d.createElement("p"),o=d.createElement("a");o.href="/",o.className="button",o.innerHTML="Go to our home page",i.append(o),t.append(n),t.append(i),e.append(t)}function r(e){var t=d.getElementById("static-map"),n=t.clientWidth,a=t.clientHeight,r=640<n||640<a?2:1,i=a<n?+(n/a).toFixed(6):+(a/n).toFixed(6);a<n?(n=640<n?640:n,a=Math.round(n/i)):(a=640<a?640:a,n=Math.round(a/i)),t.style.backgroundImage="url(https://maps.googleapis.com/maps/api/staticmap?size="+n+"x"+a+"&scale="+r+"&markers=color:red%7C"+e.lat+","+e.lng+"&key=AIzaSyAxfOOcB40yMKfupF4qyfa4hwvhTclZboA)"}function n(){var e,t=(e="id",new URL(s.location.href).searchParams.get(e));if(t)return DBHelper.fetchRestaurantById(t).then(function(e){if(e)return function(e){d.querySelector("title").innerHTML=e.name+" - Restaurant Info and Reviews";var t=d.getElementById("restaurant-name");t.innerHTML=e.name,d.getElementById("restaurant-address").innerHTML=e.address;var n=d.createElement("img");if(n.src="/img/image-placeholder.svg",n.className="restaurant-img",n.alt=e.photoDescription||"The Restaurant "+e.name+" in "+e.neighborhood,e.photograph){var a=d.createElement("picture"),r=d.createElement("source"),i=d.createElement("source");r.sizes="(min-width: 1366px) calc((1366px - 4rem) / 3), (min-width: 1080px) calc((100vw - 4rem) / 3), (min-width: 700px) calc((100vw - 3rem) / 2), calc(100vw - 2rem)",i.sizes=r.sizes,r.srcset=DBHelper.formatSrcset(e),i.srcset=r.srcset.replace(/w.jpg/g,"w.webp"),a.append(n),t.insertAdjacentElement("beforebegin",a);var o=function(){n.insertAdjacentElement("beforebegin",i),n.insertAdjacentElement("beforebegin",r),n.src=DBHelper.imageUrlForRestaurant(e,800)};699<s.innerWidth?o():s.addEventListener("scroll",function e(){o(),s.removeEventListener("scroll",e)})}else t.insertAdjacentElement("beforebegin",n);var l=d.getElementById("restaurant-cuisine"),c=d.createElement("strong");c.innerHTML="Type of Cuisine: "+e.cuisine_type,l.appendChild(c),e.operating_hours&&function(e){var t=d.getElementById("restaurant-hours");for(var n in e){var a=d.createElement("tr"),r=d.createElement("th");r.innerHTML=n,r.scope="row",a.appendChild(r);var i=d.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}}(e.operating_hours);!function(e){var t=d.getElementById("reviews-container"),n=d.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var a=d.createElement("p");return a.innerHTML="No reviews yet!",t.appendChild(a)}var r=d.getElementById("reviews-list");e.forEach(function(e){r.appendChild(function(e){var t=d.createElement("li"),n=d.createElement("article"),a=d.createElement("header"),r=d.createElement("h3"),i=d.createElement("span");i.innerHTML=e.name,r.appendChild(i);var o=d.createElement("time");o.dateTime=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1+"",r=t.getDate()+"";a.length<2&&(a="0"+a);r.length<2&&(r="0"+r);return[n,a,r].join("-")}(e.date),o.innerHTML=e.date,r.appendChild(o),a.appendChild(r),n.appendChild(a);var l=d.createElement("p"),c=d.createElement("abbr");c.title="Rating: "+e.rating+" of 5",c.className="stars-"+e.rating,l.appendChild(c),n.appendChild(l);var s=d.createElement("p");return s.innerHTML=e.comments,n.appendChild(s),t.appendChild(n),t}(e))}),t.appendChild(r)}(e.reviews)}(e),e}).catch(function(e){console.log(e)})}function l(e){var t=d.getElementById("breadcrumb"),n=d.createElement("li"),a=d.createElement("a"),r=DBHelper.urlForRestaurant(e);a.href=r,a.setAttribute("aria-current","page"),a.innerHTML=e.name,n.appendChild(a),t.appendChild(n)}}(window,document,navigator);
//# sourceMappingURL=restaurant_info.js.map
