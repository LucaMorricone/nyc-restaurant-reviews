"use strict";!function(o,u,s){if(o.fetch){var l=void 0,c=[],d=!1;o.initMap=function(){if(s.onLine){var i;l=new google.maps.Map(u.getElementById("map"),{center:{lat:40.722216,lng:-73.987501},zoom:12,scrollwheel:!1,keyboardShortcuts:!1}),m(),i=l.addListener("tilesloaded",function(){var e=u.getElementById("map-container"),t=u.createElement("a");t.className="skip-link button",t.href="#filter-options",t.innerHTML="Skip the map",e.insertAdjacentElement("afterbegin",t);var n=u.createElement("h2");n.id="map-label",n.className="sr-only",n.innerHTML="Google Maps Widget: shows restaurants location",e.insertAdjacentElement("afterbegin",n);var a=u.querySelector('#map div[tabindex="0"]');a.setAttribute("aria-labelledby","map-label");var r=u.getElementById("map");a.addEventListener("focus",function(){r.classList.add("focused")}),a.addEventListener("blur",function(){r.classList.remove("focused")}),r.addEventListener("focus",function(){l.setOptions({keyboardShortcuts:!0})},!0),r.addEventListener("blur",function(){l.setOptions({keyboardShortcuts:!1})},!0),google.maps.event.removeListener(i)})}},u.addEventListener("DOMContentLoaded",function(){var e,t,n,a;e=u.getElementById("neighborhoods-select"),t=u.getElementById("cuisines-select"),e.addEventListener("change",m),t.addEventListener("change",m),DBHelper.fetchNeighborhoods().then(r).catch(function(e){console.log(e)}),DBHelper.fetchCuisines().then(i).catch(function(e){console.log(e)}),s.onLine||(n=u.getElementById("map"),(a=u.createElement("p")).innerHTML="âš  You are offline, map is not available.",n.setAttribute("role","alert"),n.classList.add("offline"),n.append(a),m())})}else console.log("Fetch API not supported");function r(e){var n=u.getElementById("neighborhoods-select");e.forEach(function(e){var t=u.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})}function i(e){var n=u.getElementById("cuisines-select");e.forEach(function(e){var t=u.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})}function m(){var e=u.getElementById("cuisines-select"),t=u.getElementById("neighborhoods-select"),n=e.selectedIndex,a=t.selectedIndex,r=e[n].value,i=t[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,i).then(function(e){u.getElementById("restaurants-list").innerHTML="",c.length&&(c.forEach(function(e){return e.setMap(null)}),c=[]),function(e){var t=u.getElementById("results-notice");if(e.length){var n=u.getElementById("restaurants-list");e.forEach(function(e){n.append(function(e){var t=u.createElement("li"),n=u.createElement("article"),a=u.createElement("img");a.className="restaurant-img",a.src=DBHelper.imageUrlForRestaurant(e,800),a.sizes="(min-width: 1366px) calc((1366px - 5rem) / 4), (min-width: 1080px) calc((100vw - 4rem) / 3), (min-width: 700px) calc((100vw - 3rem) / 2), calc(100vw - 2rem)",a.srcset=DBHelper.formatSrcset(e),a.alt=e.photoDescription||"The "+e.cuisine_type+" Restaurant "+e.name,n.append(a);var r=u.createElement("h3");r.innerHTML=e.name,n.append(r);var i=u.createElement("p"),o=u.createElement("strong");o.innerHTML=""+e.neighborhood,i.append(o),n.append(i);var s=u.createElement("address"),l=u.createElement("p");l.innerHTML=e.address,s.append(l),n.append(s);var c=u.createElement("p"),d=u.createElement("a");return d.innerHTML="View Details",d.href=DBHelper.urlForRestaurant(e),d.className="button",d.setAttribute("aria-label","View Details about "+e.name),c.append(d),n.append(c),t.append(n),t}(e))});var a=1<e.length?"s":"";t.innerHTML=e.length+" restaurant"+a+" found"}else t.innerHTML="No restaurants found";s.onLine&&function(e){e.forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,l);t.addListener("click",function(){o.location.href=t.url}),c.push(t)});var t=new google.maps.OverlayView;if(t.draw=function(){this.getPanes().markerLayer.id="markerLayer"},t.setMap(l),d)p(e);else var n=l.addListener("tilesloaded",function(){p(e),d=!0,google.maps.event.removeListener(n)})}(e)}(e)}).catch(function(e){console.log(e)})}function p(i){setTimeout(function(){for(var e=u.querySelectorAll('[id^="gmimap"]> area'),n=u.querySelectorAll("#markerLayer img"),t=function(t){e[t].tabIndex=0,e[t].addEventListener("focus",function(){n[t].classList.add("focused")}),e[t].addEventListener("blur",function(){n[t].classList.remove("focused")}),e[t].addEventListener("keydown",function(e){13===e.keyCode&&(o.location.href=DBHelper.urlForRestaurant(i[t]))})},a=0;a<e.length;a++)t(a);var r=1<i.length?"s":"";u.querySelector("#map iframe").title="Map shows "+i.length+" restaurant"+r},150)}}(window,document,navigator);
//# sourceMappingURL=index.js.map
