"use strict";!function(s,d,o){if(s.fetch){var t,l=void 0;s.initMap=function(){e().then(function(e){var i;l=new google.maps.Map(d.getElementById("map"),{center:e.latlng,zoom:17,scrollwheel:!1,keyboardShortcuts:!1}),DBHelper.mapMarkerForRestaurant(e,l),i=l.addListener("tilesloaded",function(){var e=d.getElementById("map-container"),t=d.createElement("a");t.className="skip-link button",t.href="#restaurant-container",t.innerHTML="Skip the map",e.insertAdjacentElement("afterbegin",t);var n=d.createElement("h2");n.id="map-label",n.className="sr-only",n.innerHTML="Google Maps Widget: shows the restaurant location",e.insertAdjacentElement("afterbegin",n);var a=d.querySelector('#map div[tabindex="0"]');a.setAttribute("aria-labelledby","map-label");var r=d.getElementById("map");a.addEventListener("focus",function(){r.classList.add("focused")}),a.addEventListener("blur",function(){r.classList.remove("focused")}),r.addEventListener("focus",function(){l.setOptions({keyboardShortcuts:!0})},!0),r.addEventListener("blur",function(){l.setOptions({keyboardShortcuts:!1})},!0),google.maps.event.removeListener(i)});var t=l.addListener("tilesloaded",function(){setTimeout(function(){d.querySelector("#map iframe").title="Map shows "+e.name+" location"},150),google.maps.event.removeListener(t)})}).catch(function(e){console.log(e)})},t=function(){e().then(function(e){var t,n,a,r,i;(function(e){d.querySelector("title").innerHTML=e.name+" - Restaurant Info and Reviews";var t=d.getElementById("restaurant-name");t.innerHTML=e.name,d.getElementById("restaurant-address").innerHTML=e.address;var n=d.createElement("img");if(n.src="/img/image-placeholder.svg",n.className="restaurant-img",n.alt=e.photoDescription||"The Restaurant "+e.name+" in "+e.neighborhood,e.photograph){var a=d.createElement("picture"),r=d.createElement("source"),i=d.createElement("source");r.sizes="(min-width: 1366px) calc((1366px - 4rem) / 3), (min-width: 1080px) calc((100vw - 4rem) / 3), (min-width: 700px) calc((100vw - 3rem) / 2), calc(100vw - 2rem)",i.sizes=r.sizes,r.srcset=DBHelper.formatSrcset(e),i.srcset=r.srcset.replace(/w.jpg/g,"w.webp"),a.appendChild(n),t.insertAdjacentElement("beforebegin",a);var o=function(){n.insertAdjacentElement("beforebegin",i),n.insertAdjacentElement("beforebegin",r),n.src=DBHelper.imageUrlForRestaurant(e,800)};699<s.innerWidth?o():s.addEventListener("scroll",function e(){o(),s.removeEventListener("scroll",e)})}else t.insertAdjacentElement("beforebegin",n);var l=d.getElementById("restaurant-cuisine"),c=d.createElement("strong");c.innerHTML="Type of Cuisine: "+e.cuisine_type,l.appendChild(c),e.operating_hours&&function(e){var t=d.getElementById("restaurant-hours");for(var n in e){var a=d.createElement("tr"),r=d.createElement("th");r.innerHTML=n,r.scope="row",a.appendChild(r);var i=d.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}}(e.operating_hours);!function(e){var t=d.getElementById("reviews-container"),n=d.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var a=d.createElement("p");return a.innerHTML="No reviews yet!",t.appendChild(a)}var r=d.getElementById("reviews-list");e.forEach(function(e){r.appendChild(function(e){var t=d.createElement("li"),n=d.createElement("article"),a=d.createElement("header"),r=d.createElement("h3"),i=d.createElement("span");i.innerHTML=e.name,r.appendChild(i);var o=d.createElement("time");o.dateTime=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1+"",r=t.getDate()+"";a.length<2&&(a="0"+a);r.length<2&&(r="0"+r);return[n,a,r].join("-")}(e.date),o.innerHTML=e.date,r.appendChild(o),a.appendChild(r),n.appendChild(a);var l=d.createElement("p"),c=d.createElement("abbr");c.title="Rating: "+e.rating+" of 5",c.className="stars-"+e.rating,l.appendChild(c),n.appendChild(l);var s=d.createElement("p");return s.innerHTML=e.comments,n.appendChild(s),t.appendChild(n),t}(e))}),t.appendChild(r)}(e.reviews)}(e),e)?(t=e,n=d.getElementById("breadcrumb"),a=d.createElement("li"),r=d.createElement("a"),i=DBHelper.urlForRestaurant(t),r.href=i,r.setAttribute("aria-current","page"),r.innerHTML=t.name,a.appendChild(r),n.appendChild(a),function(e){o.onLine&&function(){var n=d.getElementById("static-map");function a(){var e=d.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxfOOcB40yMKfupF4qyfa4hwvhTclZboA&libraries=places&callback=initMap",e.setAttribute("async",""),d.getElementsByTagName("head")[0].appendChild(e)}function r(){d.getElementById("map").style.display="block",n.removeAttribute("tabindex"),n.removeAttribute("role"),n.removeAttribute("aria-label"),setTimeout(function(){d.querySelector('#map div[tabindex="0"]').focus()},1e3)}n.addEventListener("click",function e(){o.onLine?(a(),r()):m(),n.removeEventListener("click",e)}),n.addEventListener("keydown",function e(t){13===t.keyCode&&(o.onLine?(a(),r()):m(),n.removeEventListener("keydown",e))})}();c(e),s.addEventListener("resize",function(){requestAnimationFrame(function(){c(e)})})}(e.latlng),o.onLine||m()):function(){d.querySelector("title").innerHTML="Page Not Found - Restaurant Reviews",d.body.removeChild(d.querySelector("a.skip-link")),d.body.removeChild(d.querySelector('nav[aria-label="Breadcrumb"]'));var e=d.querySelector("main");e.innerHTML="",d.body.className="error-page",e.removeAttribute("class");var t=d.createElement("div");t.setAttribute("role","alert");var n=d.createElement("header"),a=d.createElement("h1");a.innerHTML="Error 404";var r=d.createElement("p");r.innerHTML="Sorry, but the page you were trying to view does not exist.",n.appendChild(a),n.appendChild(r);var i=d.createElement("p"),o=d.createElement("a");o.href="/",o.className="button",o.innerHTML="Go to our home page",i.appendChild(o),t.appendChild(n),t.appendChild(i),e.appendChild(t)}()}).catch(function(e){console.log(e)})},"loading"!==d.readyState?t():d.addEventListener("DOMContentLoaded",function e(){t(),d.removeEventListener("DOMContentLoaded",e)})}else console.log("Fetch API not supported");function c(e){var t=d.getElementById("static-map"),n=t.clientWidth,a=t.clientHeight,r=640<n||640<a?2:1,i=a<n?+(n/a).toFixed(6):+(a/n).toFixed(6);a<n?(n=640<n?640:n,a=Math.round(n/i)):(a=640<a?640:a,n=Math.round(a/i)),t.style.backgroundImage="url(https://maps.googleapis.com/maps/api/staticmap?size="+n+"x"+a+"&scale="+r+"&markers=color:red%7C"+e.lat+","+e.lng+"&format=jpg&key=AIzaSyAxfOOcB40yMKfupF4qyfa4hwvhTclZboA)"}function m(){var e=d.getElementById("static-map"),t=d.createElement("p");t.setAttribute("role","alert"),t.innerHTML="âš  You are offline, map is not available.",e.classList.add("offline"),e.appendChild(t)}function e(){var e,t=(e="id",new URL(s.location.href).searchParams.get(e));if(t)return DBHelper.fetchRestaurantById(t).then(function(e){if(e)return e}).catch(function(e){console.log(e)})}}(window,document,navigator);
//# sourceMappingURL=restaurant_info.js.map
